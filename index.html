<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2022.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
    span.s1 {font: 12.0px 'PingFang HK'}
    span.s2 {font: 12.0px 'Apple Color Emoji'}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="zh-Hant"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;title&gt;The Blessed Crane&lt;/title&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>/* ===== <span class="s1">å…¨ç«™ç¦ªé¢¨æ¨£å¼</span> ===== */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>html, body {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>margin: 0;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>padding: 0;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>height: 100%;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>overflow: hidden;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>body {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>font-family:<span class="Apple-converted-space">Â </span></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>"Shippori Mincho",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>"Noto Sans TC",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>"Noto Serif JP",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>serif;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>background: linear-gradient(</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>180deg,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#c9e7ff 0%,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>#fff5d4 80%</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>color: #333;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>h1 {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>margin-top: 20px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>font-size: 24px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>letter-spacing: 0.25em;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>font-weight: 500;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>.sub {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>color: #666;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>font-size: 13px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>margin-top: 6px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>line-height: 1.6;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>#draw {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>display: block;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>margin: 12px auto;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>background: #ffffffcc;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>border-radius: 12px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>box-shadow: 0 10px 25px rgba(0,0,0,0.1);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>touch-action: none;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>input {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>padding: 8px 12px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>width: 70%;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>max-width: 260px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>border-radius: 999px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>border: 1px solid #ccc;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>margin-top: 10px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>background: #ffffffee;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>font-size: 14px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>outline: none;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>button {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>margin-top: 12px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>padding: 8px 20px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>border-radius: 999px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>border: none;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>background: #222;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>color: #fff;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>letter-spacing: 0.15em;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>font-size: 13px;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>button:hover {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>background: #000;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>#sky {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>position: fixed;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>top: 0;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>left: 0;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>pointer-events: none;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>z-index: -1;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>/* <span class="s1">é£„å‹•çš„ç¥ç¦èª</span> */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>@keyframes floatText {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>0% { transform: translateX(0px); opacity: 0.9; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>50% { transform: translateX(8px); opacity: 1; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>100% { transform: translateX(-5px); opacity: 0.85; }</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;/style&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;h1&gt;THE BLESSED CRANE&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;div class="sub"&gt;<span class="s1">ç‚ºé¦™æ¸¯ï¼Œä¹Ÿç‚ºé›¢æ•£çš„éˆé­‚ã€‚</span>&lt;br&gt;<span class="s1">ç•«ä¸€éš»ç´™é¶´ï¼ŒæŠŠç¥ç¦æ”¾é£›ä¸Šå¤©ã€‚</span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;canvas id="draw" width="300" height="260"&gt;&lt;/canvas&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;input id="wish" type="text" placeholder="<span class="s1">å¯«ä¸€å¥ç¥ç¦èª</span>â€¦" maxlength="40"&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;br&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;button id="send"&gt;<span class="s1">æ”¾é£›ç´™é¶´</span>&lt;/button&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;canvas id="sky"&gt;&lt;/canvas&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;!-- Firebase SDK --&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"&gt;&lt;/script&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>/* ===== Firebase <span class="s1">è¨­å®šï¼ˆä½ éœ€è¦æ›æˆè‡ªå·±çš„ï¼ï¼‰</span> ===== */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const firebaseConfig = {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>apiKey: "YOUR_API_KEY",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>authDomain: "YOUR_PROJECT_ID.firebaseapp.com",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>projectId: "YOUR_PROJECT_ID",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>storageBucket: "YOUR_PROJECT_ID.appspot.com",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>messagingSenderId: "YOUR_SENDER_ID",</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>appId: "YOUR_APP_ID"</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>};</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>firebase.initializeApp(firebaseConfig);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const db = firebase.firestore();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>/* ===== 1. <span class="s1">ç•«ç´™é¶´</span> ===== */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const canvas = document.getElementById("draw");</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const ctx = canvas.getContext("2d");</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>let drawing = false;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>function getPos(e) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const rect = canvas.getBoundingClientRect();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>let x, y;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>if (e.touches) {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>x = e.touches[0].clientX - rect.left;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>y = e.touches[0].clientY - rect.top;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>x = e.clientX - rect.left;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>y = e.clientY - rect.top;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>return { x, y };</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>canvas.addEventListener("mousedown", e =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>drawing = true;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>let p = getPos(e);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>ctx.beginPath();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>ctx.moveTo(p.x, p.y);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>canvas.addEventListener("mousemove", e =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!drawing) return;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>let p = getPos(e);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>ctx.lineWidth = 2;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>ctx.strokeStyle = "rgba(0,0,0,0.8)";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>ctx.lineCap = "round";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>ctx.lineTo(p.x, p.y);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>ctx.stroke();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>canvas.addEventListener("mouseup", () =&gt; drawing = false);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>canvas.addEventListener("mouseleave", () =&gt; drawing = false);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>/* <span class="s1">æ‰‹æ©Ÿ</span> */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>canvas.addEventListener("touchstart", e =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>drawing = true;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>let p = getPos(e);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>ctx.beginPath();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>ctx.moveTo(p.x, p.y);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>canvas.addEventListener("touchmove", e =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!drawing) return;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>e.preventDefault();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>let p = getPos(e);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>ctx.lineTo(p.x, p.y);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>ctx.stroke();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>canvas.addEventListener("touchend", () =&gt; drawing = false);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>/* ===== 2. <span class="s1">æ”¾é£›ï¼ˆå¯«å…¥</span> Firebase<span class="s1">ï¼‰</span> ===== */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>document.getElementById("send").onclick = async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const wish = document.getElementById("wish").value.trim();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!wish) return alert("<span class="s1">è«‹å¯«ä¸€å¥ç¥ç¦</span> <span class="s2">ğŸ’›</span>");</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>const img = canvas.toDataURL();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>await db.collection("cranes").add({</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>img,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>text: wish,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>createdAt: firebase.firestore.FieldValue.serverTimestamp(),</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>startX: Math.random()</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>ctx.clearRect(0, 0, canvas.width, canvas.height);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>document.getElementById("wish").value = "";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>alert("<span class="s1">ä½ çš„ç´™é¶´å·²ç¶“é£›ä¸Šå¤©ç©º</span> <span class="s2">ğŸ•Šï¸</span>");</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>/* ===== 3. <span class="s1">å¤©ç©ºå‹•ç•«</span> ===== */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const sky = document.getElementById("sky");</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>const sctx = sky.getContext("2d");</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>function resizeSky() {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>sky.width = window.innerWidth;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>sky.height = window.innerHeight;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>resizeSky();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>window.onresize = resizeSky;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>let cranes = [];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>function animate() {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>sctx.clearRect(0, 0, sky.width, sky.height);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>cranes.forEach(c =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>c.y -= c.speed;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>sctx.drawImage(c.imgObj, c.x, c.y, 60, 60);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>sctx.fillStyle = "rgba(0,0,0,0.6)";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>sctx.font = "12px serif";</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>sctx.fillText(c.text, c.x, c.y + 75);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>cranes = cranes.filter(c =&gt; c.y &gt; -100);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>requestAnimationFrame(animate);</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>animate();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>/* ===== 4. <span class="s1">æ¥æ”¶</span> Firebase <span class="s1">æ–°ç´™é¶´</span> ===== */</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>db.collection("cranes").orderBy("createdAt").onSnapshot(snap =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>snap.docChanges().forEach(change =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (change.type === "added") {</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>const d = change.doc.data();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>const imgObj = new Image();</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>imgObj.src = d.img;</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>cranes.push({</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>imgObj,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>text: d.text,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>x: (d.startX || Math.random()) * sky.width,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>y: sky.height + Math.random() * 100,</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>speed: 0.4 + Math.random() * 0.6</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>});</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  Â  </span>});</p>
<p class="p1"><span class="Apple-converted-space">Â  Â  </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">Â  </span>&lt;/script&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
